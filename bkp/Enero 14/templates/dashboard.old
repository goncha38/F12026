{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<h2 class="mb-3">ğŸï¸ Race Week!</h2>

<div class="card mb-4">
    <div class="card-body">
        <h4>{{ carrera.autodromo }} â€“ {{ carrera.pais }}</h4>

        <img src="{{ url_for('static', filename='circuitos/' + carrera.imagen) }}"
             class="img-fluid rounded my-3">

        {% if horas_restantes is not none %}
            <div class="alert alert-warning">
                â³ Quedan <strong>{{ horas_restantes }} horas</strong> para cerrar el pronÃ³stico
            </div>
        {% endif %}

        <a href="/pronostico/{{ carrera.id }}" class="btn btn-primary">
            {% if ya_pronosticado %}
                Ver / Editar pronÃ³stico
            {% else %}
                Cargar pronÃ³stico
            {% endif %}
        </a>
    </div>
</div>

<h4>PrÃ³ximas carreras</h4>
<table class="table table-striped table-sm">
    <thead>
        <tr>
            <th>Carrera</th>
            <th>Fecha</th>
        </tr>
    </thead>
    <tbody>
        {% for c in proximas %}
        <tr>
            <td>{{ c.pais }}</td>
            <td>{{ c.fecha }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}


{% if carrera %}
<div style="border:2px solid #28a745;padding:20px;margin-bottom:30px;">
    <h2>ğŸ RACE WEEK !!!</h2>

    <h3>{{ carrera.pais }} â€“ {{ carrera.autodromo }}</h3>

    <!-- Imagen del circuito -->
    {% if carrera.imagen %}
        <img src="{{ url_for('static', filename='circuitos/' ~ carrera.imagen) }}"
             style="max-width:100%;height:auto;margin:15px 0;">
    {% endif %}

    {% if horas_restantes is not none %}
        <p>â³ Quedan <strong>{{ horas_restantes }} horas</strong> para cerrar el pronÃ³stico</p>
    {% else %}
        <p><em>Fecha lÃ­mite aÃºn no definida</em></p>
    {% endif %}

    {% if ya_pronosticado %}
        <p style="color:#155724;">
            âœ… Ya cargaste tu pronÃ³stico.<br>
            <a href="/pronostico/{{ carrera.id }}">Modificar pronÃ³stico</a>
        </p>
    {% else %}
        <a href="/pronostico/{{ carrera.id }}"
           style="padding:10px 15px;background:#007bff;color:white;text-decoration:none;">
            ğŸ‘‰ Cargar pronÃ³stico
        </a>
    {% endif %}
</div>
{% else %}
<div style="padding:15px;background:#f8f9fa;">
    <h3>â¸ No hay Race Week activa</h3>
</div>
{% endif %}


<h3>PrÃ³ximas carreras</h3>

<table border="1" cellpadding="6" width="100%">
    <tr>
        <th>Carrera</th>
        <th>Fecha</th>
        <th>Estado</th>
    </tr>

    {% for c in proximas %}
    <tr style="background:#f2f2f2;">
        <td>{{ c.pais }}</td>
        <td>{{ c.fecha }}</td>
        <td>ğŸ”’ PronÃ³stico cerrado</td>
    </tr>
    {% endfor %}
</table>

