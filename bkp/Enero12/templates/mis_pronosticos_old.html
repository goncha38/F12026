<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Mis Pronósticos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">

  <h2 class="mb-4">Mis Pronósticos — Carreras</h2>

  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Carrera</th>
        <th>Clasificación</th>
        <th>Tiempo restante</th>
        <th>Estado</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody>
      {% for c in carreras %}
      <tr>
        <td>{{ c.id }}</td>
        <td>{{ c.pais }} — {{ c.autodromo }}</td>
        <td>{{ c.clasificacion if c.clasificacion else c.fecha }}</td>
        <td>{{ tiempo_restante_clasificacion(c) }}</td>
        <td>
          {% if is_pronostico_abierto(c) %}
            <span class="badge bg-success">Abierto</span>
          {% else %}
            <span class="badge bg-secondary">Cerrado</span>
          {% endif %}
        </td>
        <td>
          {% if is_pronostico_abierto(c) or c.tiene_pronostico %}
            <a class="btn btn-sm btn-primary" href="{{ url_for('pronostico_por_carrera', carrera_id=c.id) }}">
              {{ "Editar" if c.tiene_pronostico else "Cargar" }}
            </a>
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="mt-3">
    <a href="/dashboard" class="btn btn-secondary">Volver al Dashboard</a>
    <a href="/calendario" class="btn btn-link">Ver calendario</a>
  </div>

</div>
</body>
</html>
