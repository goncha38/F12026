{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

{% if carrera %}
<h2 class="mb-3">ğŸ Race Week!</h2>

<div class="card race-card mb-4 shadow-sm">
    <div class="card-body">

        <h4 class="card-title text-center">
            {{ carrera.autodromo }} â€“ {{ carrera.pais }}
        </h4>

        {% if carrera.imagen %}
        <img src="{{ url_for('static', filename='circuitos/' + carrera.imagen) }}"
             class="img-fluid rounded my-3">
        {% endif %}

        {% if horas_restantes is not none %}
            <div class="alert alert-warning text-center">
                â³ Quedan <strong>{{ horas_restantes }} horas</strong> para cerrar el pronÃ³stico
            </div>
        {% else %}
            <div class="alert alert-secondary text-center">
                Fecha lÃ­mite aÃºn no definida
            </div>
        {% endif %}

        <div class="d-grid gap-2">
            <a href="/pronostico/{{ carrera.id }}" class="btn btn-primary btn-lg">
                {% if ya_pronosticado %}
                    âœï¸ Ver / Editar pronÃ³stico
                {% else %}
                    ğŸ“ Cargar pronÃ³stico
                {% endif %}
            </a>
        </div>

    </div>
</div>

{% else %}
<div class="alert alert-secondary text-center">
    â¸ No hay Race Week activa
</div>
{% endif %}
<div class="d-grid gap-2 mt-3">
    <a href="/ranking" class="btn btn-outline-dark">
        ğŸ† Ver Ranking General
    </a>
</div>


<h4 class="mt-4">PrÃ³ximas carreras</h4>

<table class="table table-striped table-sm">
    <thead>
        <tr>
            <th>Carrera</th>
            <th>Fecha</th>
        </tr>
    </thead>
    <tbody>
        {% for c in proximas %}
        <tr>
            <td>{{ c.pais }}</td>
            <td>{{ c.fecha }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
